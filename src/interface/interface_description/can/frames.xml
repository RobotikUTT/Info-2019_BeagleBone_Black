<?xml version="1.0"?>
<!-- Frame file description -->
<frames>
	<!-- Basic communication -->
	<frame name="ping" id="0">
		<description>Ping all devices</description>
		<source>bbb</source>
		<dest>all</dest>
	</frame>

	<frame name="pong" id="1">
		<description>Pong !</description>
		<source>all</source>
		<dest>stm</dest>

		<byte name="device" />
		<byte name="status">
			<alive v="0" />
			<some_issues v="1" />
		</byte>
	</frame>

	<!-- STM orders -->
	<frame name="order_complete" id="26">
		<description>STM move order complete</description>
		<source>stm</source>
		<dest>bbb</dest>

	</frame>

	<frame name="stm_coder_data" id="5">
		<description>Data of coding wheel</description>
		<source>stm</source>
		<dest>all</dest>

		<word name="right_wheel_dist" />
		<word name="left_wheel_dist" />
	</frame>

	<frame name="current_pos" id="18">
		<description>Data of current robot position</description>
		<source>stm</source>
		<dest>bbb</dest>

		<word name="x" />
		<word name="y" />
		<word name="angle" />
	</frame>

	<frame name="current_pwm" id="19">
		<description>Current wheels motors PWM</description>
		<source>stm</source>
		<dest>bbb</dest>

		<word name="left_pwm" />
		<word name="right_pwm" />
	</frame>

	<frame name="current_speed" id="20">
		<description>Current speed of the robot</description>
		<source>stm</source>
		<dest>bbb</dest>

		<word name="linear_speed" />
		<word name="left_speed" />
		<word name="right_speed" />
	</frame>

	<frame name="robot_blocked" id="28">
		<description>Robot blocked signal</description>
		<source>stm</source>
		<dest>bbb</dest>

	</frame>

	<frame name="set_stm_mode" id="7">
		<description>Set STM mode</description>
		<source>bbb</source>
		<dest>stm</dest>

		<byte name="value">
			<stop v="0" />
			<start v="1" />
			<pause v="2" />
			<resume v="3" />
			<reset_id v="4" />
			<set_emergency_stop v="5" />
			<next_order v="6" />
			<reset_order v="7" />
			<reset_emergency_stop v="8" />
		</byte>
	</frame>

	<frame name="set_speed" id="4">
		<description>Set the speed of the STM</description>
		<source>bbb</source>
		<dest>stm</dest>

		<word name="linear_speed" />
		<word name="angular_speed" />
		<word name="duration" />
	</frame>

	<frame name="go_to_angle" id="8">
		<description>Send order to STM to rotate to a given absolute angle</description>
		<source>bbb</source>
		<dest>stm</dest>

		<word name="x" />
		<word name="y" />
		<word name="angle" />
		<byte name="direction" />
	</frame>

	<frame name="go_to" id="9">
		<description>Send order to STM to move toward a given point</description>
		<source>bbb</source>
		<dest>stm</dest>

		<word name="x" />
		<word name="y" />
		<byte name="direction" />
	</frame>

	<frame name="rotate" id="10">
		<description>Send order to STM to rotate of a given angle</description>
		<source>bbb</source>
		<dest>stm</dest>

		<byte name="angle" />
	</frame>

	<frame name="set_left_pid" id="12">
		<description>Set left STM's PID</description>
		<source>bbb</source>
		<dest>stm</dest>

		<word name="P" />
		<word name="I" />
		<word name="D" />
	</frame>

	<frame name="set_right_pid" id="13">
		<description>Set right STM's PID</description>
		<source>bbb</source>
		<dest>stm</dest>

		<word name="P" />
		<word name="I" />
		<word name="D" />
	</frame>

	<frame name="set_both_pid" id="14">
		<description>Set stm's PID on left and right side</description>
		<source>bbb</source>
		<dest>stm</dest>

		<word name="P" />
		<word name="I" />
		<word name="D" />
	</frame>
	
	<frame name="set_pwm" id="15">
		<description>Set wheels PWM</description>
		<source>bbb</source>
		<dest>stm</dest>

		<word name="left_pwm" />
		<word name="right_pwm" />
	</frame>

	<frame name="set_position" id="16">
		<description>Set robot absolute position in STM</description>
		<source>bbb</source>
		<dest>stm</dest>

		<word name="x" />
		<word name="y" />
		<word name="angle" />
	</frame>

	<frame name="set_stm_param" id="17">
		<description>Set speed and acceleration parameter in STM</description>
		<source>bbb</source>
		<dest>stm</dest>

		<word name="max_linear_speed" />
		<word name="max_angular_speed" />
		<word name="max_acc" />
	</frame>

	<frame name="sonar_distance" id="23">
		<description>Data on sonar distance</description>
		<source>arduino</source>
		<dest>bbb</dest>

		<byte name="dist_front_left" />
		<byte name="dist_front_right" />
		<byte name="dist_back_left" />
		<byte name="dist_back_right" />
	</frame>
</frames>