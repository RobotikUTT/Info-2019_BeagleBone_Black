<?xml version="1.0"?>
<!--
	== Automatic can to msg mapping ==
	Two elements are available :
	<input /> to provide a channel from can boards to ros
	<output /> to provide a channel from ros to can boards

	Each element can take <param>s, that MUST be defined in
	provided "msg" tag's message.

	Each param must specify a size (in byte) and a position.
	The position is relative to other params so it does not
	necessarily follow a standart for now.
 -->
<mapping>
	<!-- Input -->
	<input frame="ORDER_GET_CODER" msg="WheelsDistance" topic="/STM/GetCoder">
		<word name="right_wheel_dist" />
		<word name="left_wheel_dist" />
	</input>

	<input frame="ORDER_CURRENT_POS" msg="Point" topic="/STM/Position">
		<word name="pos_x" />
		<word name="pos_y" />
		<word name="angle" />
	</input>
	
	<input frame="ORDER_CURRENT_PWM" msg="Pwms" topic="/STM/GetPWM">
		<word name="left_pwm" />
		<word name="right_pwm" />
	</input>
	
	<input frame="ORDER_CURRENT_SPD" msg="WheelsSpeed" topic="/STM/GetSpeed">
		<word name="linear_speed" />
		<word name="left_speed" />
		<word name="right_speed" />
	</input>
	
	<input frame="ORDER_SONAR_DISTANCE" msg="SonarDistance" topic="/ARDUINO/SonarDistance">
		<byte name="dist_front_left" />
		<byte name="dist_front_right" />
		<byte name="dist_back_left" />
		<byte name="dist_back_right" />
	</input>

	<input frame="ORDER_ORDER_COMPLETED" msg="StmDone" topic="/ALL/Finish" />

	<input frame="ORDER_ROBOT_BLOCKED" msg="RobotBlocked" topic="/STM/RobotBlocked" />

	<!-- /Inputs -->

	<!-- Outputs -->
	<output frame="ORDER_SET_MODE_ARDUINO" msg="StmMode" topic="/STM/SetMode">
		<byte name="value" />
	</output>

	<output frame="ORDER_SPD" msg="Speed" topic="/STM/Speed">
		<word name="linear_speed" />
		<word name="angular_speed" />
		<word name="duration" />
	</output>

	<output frame="ORDER_MANAGEMENT" msg="StmMode" topic="/STM/AsserManagement">
		<byte name="value" />
	</output>


	<output frame="ORDER_GOTOA" msg="Point" topic="/STM/GoToAngle">
		<word name="pos_x" />
		<word name="pos_y" />
		<word name="angle" />
		<byte name="direction" />
	</output>

	<output frame="ORDER_GOTO" msg="Point" topic="/STM/GoTo">
		<word name="pos_x" />
		<word name="pos_y" />
		<byte name="direction" />
	</output>

	<output frame="ORDER_ROT" msg="Point" topic="/STM/Rotation">
		<byte name="angle" />
	</output>

	<output frame="ORDER_PIDLEFT" msg="Pid" topic="/STM/LeftPID">
		<word name="P" />
		<word name="I" />
		<word name="D" />
	</output>

	<output frame="ORDER_PIDRIGHT" msg="Pid" topic="/STM/RightPID">
		<word name="P" />
		<word name="I" />
		<word name="D" />
	</output>

	<output frame="ORDER_PIDALL" msg="Pid" topic="/STM/AllPID">
		<word name="P" />
		<word name="I" />
		<word name="D" />
	</output>
	
	<output frame="ORDER_PWM" msg="Pwms" topic="/STM/PWM">
		<word name="left_pwm" />
		<word name="right_pwm" />
	</output>

	<output frame="ORDER_SET_POS" msg="Point" topic="/STM/SetPose">
		<word name="pos_x" />
		<word name="pos_y" />
		<word name="angle" />
	</output>

	<output frame="ORDER_SET_PARAM" msg="StmParams" topic="/STM/SetParam">
		<word name="max_linear_speed" />
		<word name="max_angular_speed" />
		<word name="max_acc" />
	</output>

	<!--<output frame="ORDER_HANDSHAKE" msg="std_msgs::Empty" topic="/ALL/Ping" />
	<output frame="ORDER_SEND_POINT" msg="std_msgs::Int8" topic="/PANEL/AddPoint">
		<byte name="data" />		
	</output>-->
</mapping>